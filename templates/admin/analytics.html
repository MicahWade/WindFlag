{% extends "base.html" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6 text-white">Admin Analytics</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl font-semibold mb-4 text-white">Points Distribution by Category</h2>
        <canvas id="categoryPointsChart"></canvas>
    </div>

    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl font-semibold mb-4 text-white">Points Distribution by User</h2>
        <canvas id="userPointsChart"></canvas>
    </div>
</div>

<div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl font-semibold mb-4 text-white">Challenges Solved Over Time</h2>
        <canvas id="challengesSolvedChart"></canvas>
    </div>

    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl font-semibold mb-4 text-white">Fails vs Succeeds</h2>
        <canvas id="failsSucceedsChart"></canvas>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Define global JavaScript variables with data from Flask
    const flaskCategoryLabels = {{ category_labels | tojson }};
    const flaskCategoryValues = {{ category_values | tojson }};
    const flaskUserLabels = {{ user_labels | tojson }};
    const flaskUserValues = {{ user_values | tojson }};
    const flaskSolvedDates = {{ solved_dates | tojson }};
    const flaskSolvedCounts = {{ solved_counts | tojson }};
    const flaskFailsSucceedsLabels = {{ fails_succeeds_labels | tojson }};
    const flaskFailsSucceedsValues = {{ fails_succeeds_values | tojson }};
</script>
<script src="{{ url_for('static', filename='js/admin_analytics.js') }}"></script>
{% endblock %}